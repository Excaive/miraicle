(self.webpackChunkmiraicle_document=self.webpackChunkmiraicle_document||[]).push([[291],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return k}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var m=a.createContext({}),o=function(e){var t=a.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=o(e.components);return a.createElement(m.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,m=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),c=o(n),k=r,s=c["".concat(m,".").concat(k)]||c[k]||u[k]||l;return n?a.createElement(s,i(i({ref:t},d),{},{components:n})):a.createElement(s,i({ref:t},d))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=c;var p={};for(var m in t)hasOwnProperty.call(t,m)&&(p[m]=t[m]);p.originalType=e,p.mdxType="string"==typeof e?e:r,i[1]=p;for(var o=2;o<l;o++)i[o]=n[o];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},1129:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return p},contentTitle:function(){return m},metadata:function(){return o},toc:function(){return d},default:function(){return c}});var a=n(2122),r=n(9756),l=(n(7294),n(3905)),i=["components"],p={sidebar_position:5},m="\u6d88\u606f\u94fe",o={unversionedId:"guides/message-chain",id:"guides/message-chain",isDocsHomePage:!1,title:"\u6d88\u606f\u94fe",description:"\u6211\u4eec\u5df2\u7ecf\u6210\u529f\u5730\u8ba9 bot \u53d1\u9001\u6587\u5b57\u6d88\u606f\u3002\u90a3\u4e48\uff0c\u5982\u4f55\u8ba9 bot \u53d1\u9001\u5e26\u6709\u8868\u60c5\u3001\u56fe\u7247\u7684\u66f4\u52a0\u590d\u6742\u7684\u6d88\u606f\u5462\uff1f\u770b\u5b8c\u672c\u8282\u4e4b\u540e\uff0c\u4f60\u4f1a\u5f97\u5230\u7b54\u6848\u3002",source:"@site/docs/guides/5-message-chain.md",sourceDirName:"guides",slug:"/guides/message-chain",permalink:"/miraicle/docs/guides/message-chain",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/guides/5-message-chain.md",version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"guides",previous:{title:"\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f",permalink:"/miraicle/docs/guides/what-happened"},next:{title:"\u9879\u76ee\u7ed3\u6784",permalink:"/miraicle/docs/guides/write-plugins/project-structure"}},d=[{value:"\u6587\u5b57 (Plain)",id:"\u6587\u5b57-plain",children:[]},{value:"At",id:"at",children:[]},{value:"At \u5168\u4f53\u6210\u5458 (AtAll)",id:"at-\u5168\u4f53\u6210\u5458-atall",children:[]},{value:"\u8868\u60c5 (Face)",id:"\u8868\u60c5-face",children:[]},{value:"\u56fe\u7247 (Image)",id:"\u56fe\u7247-image",children:[]},{value:"\u95ea\u7167 (FlashImage)",id:"\u95ea\u7167-flashimage",children:[]},{value:"\u8bed\u97f3 (Voice)",id:"\u8bed\u97f3-voice",children:[]},{value:"Xml",id:"xml",children:[]},{value:"Json",id:"json",children:[]},{value:"App",id:"app",children:[]},{value:"Poke",id:"poke",children:[]},{value:"\u9ab0\u5b50 (Dice)",id:"\u9ab0\u5b50-dice",children:[]},{value:"\u6587\u4ef6 (File)",id:"\u6587\u4ef6-file",children:[]}],u={toc:d};function c(e){var t=e.components,n=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"\u6d88\u606f\u94fe"},"\u6d88\u606f\u94fe"),(0,l.kt)("p",null,"\u6211\u4eec\u5df2\u7ecf\u6210\u529f\u5730\u8ba9 bot \u53d1\u9001\u6587\u5b57\u6d88\u606f\u3002\u90a3\u4e48\uff0c\u5982\u4f55\u8ba9 bot \u53d1\u9001\u5e26\u6709\u8868\u60c5\u3001\u56fe\u7247\u7684\u66f4\u52a0\u590d\u6742\u7684\u6d88\u606f\u5462\uff1f\u770b\u5b8c\u672c\u8282\u4e4b\u540e\uff0c\u4f60\u4f1a\u5f97\u5230\u7b54\u6848\u3002"),(0,l.kt)("p",null,"\u53ef\u80fd\u4f60\u6ce8\u610f\u5230\u4e86\uff0c\u4e0a\u4e00\u8282\u4e2d\u5df2\u7ecf\u63d0\u5230\u4e86\u201c\u6d88\u606f\u94fe\u201d\u8fd9\u4e2a\u540d\u8bcd\u3002\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"mirai")," \u7684\u8bbe\u8ba1\u4e2d\uff0c\u6d88\u606f\u4e0d\u662f\u4e00\u4e32\u5b57\u7b26\uff0c\u800c\u662f\u7531\u6587\u5b57\u3001\u8868\u60c5\u3001\u56fe\u7247\u7b49\u6d88\u606f\u5143\u7d20\u7ec4\u6210\u7684\u5217\u8868\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"miraicle")," \u4e5f\u6cbf\u7528\u4e86\u8fd9\u6837\u7684\u8bbe\u8ba1\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"msg.chain")," \u6765\u8bbf\u95ee\u6d88\u606f\u5bf9\u8c61\u5bf9\u5e94\u7684\u6d88\u606f\u94fe\uff0c\u5b83\u662f\u4e00\u4e2a\u88c5\u6709\u5404\u79cd\u6d88\u606f\u5143\u7d20\u7684\u5217\u8868\uff0c\u8fd9\u4e9b\u6d88\u606f\u5143\u7d20\u5747\u7ee7\u627f\u81ea ",(0,l.kt)("inlineCode",{parentName:"p"},"Element"),"\u3002"),(0,l.kt)("p",null,"\u5f53\u4f60\u8ba9 bot \u53d1\u9001\u6d88\u606f\u65f6\uff0c\u4e5f\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a\u8fd9\u6837\u7684\u5217\u8868\u3002\u8ba9\u6211\u4eec\u6765\u628a\u4e0a\u4e00\u8282\u4e2d\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"hello_to_group")," \u51fd\u6570\u6539\u5199\u4e00\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"@miraicle.Mirai.receiver('GroupMessage')\ndef hello_to_group(bot: miraicle.Mirai, msg: miraicle.GroupMessage):\n    if msg.plain in ['Hello', 'hello']:\n        bot.send_group_msg(group=msg.group, msg=[miraicle.Plain('Hello world!'),\n                                                 miraicle.Face().from_face_id(74),\n                                                 miraicle.At(qq=msg.sender)])\n")),(0,l.kt)("p",null,"\u6211\u4eec\u4e0d\u5e0c\u671b bot \u5bf9\u7fa4\u91cc\u6bcf\u4e00\u6761\u6d88\u606f\u90fd\u505a\u56de\u5e94\uff0c\u9020\u6210\u5237\u5c4f\uff0c\u6240\u4ee5\u6211\u4eec\u4f7f\u7528\u4e86\u4e00\u6761\u9009\u62e9\u8bed\u53e5\u3002\u73b0\u5728\uff0c\u53ea\u6709\u5f53\u6d88\u606f\u7684\u6587\u5b57\u5185\u5bb9\u4e3a 'Hello' \u6216 'hello' \u7684\u65f6\u5019\uff0cbot \u624d\u4f1a\u54cd\u5e94\u3002"),(0,l.kt)("p",null,"\u8fd0\u884c\u7a0b\u5e8f\uff0c\u8bd5\u7740\u5728\u7fa4\u91cc\u5411 bot \u95ee\u597d\u3002bot \u4f1a\u53d1\u9001\u5e26\u6709\u8868\u60c5\u7684 'Hello world!'\uff0c\u5e76 at \u4f60\u3002"),(0,l.kt)("p",null,"\u4e0b\u9762\u5bf9\u5404\u79cd\u6d88\u606f\u5143\u7d20\u8fdb\u884c\u4ecb\u7ecd\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u6d88\u606f\u5143\u7d20\uff0c\u6784\u9020\u66f4\u52a0\u590d\u6742\u7684\u6d88\u606f\u94fe\u3002"),(0,l.kt)("h2",{id:"\u6587\u5b57-plain"},"\u6587\u5b57 (Plain)"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,l.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"text")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"str")),(0,l.kt)("td",{parentName:"tr",align:null},"\u6d88\u606f\u5185\u5bb9")))),(0,l.kt)("p",null,"\u6784\u9020\u65b9\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"miraicle.Plain('Hello world!')\n")),(0,l.kt)("h2",{id:"at"},"At"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,l.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"qq")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"int")),(0,l.kt)("td",{parentName:"tr",align:null},"at \u7684\u7fa4\u5458\u7684 QQ \u53f7")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"display")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"str")),(0,l.kt)("td",{parentName:"tr",align:null},"at \u65f6\u663e\u793a\u7684\u6587\u5b57\uff0c\u53ef\u9009\uff0c\u4ec5\u63a5\u6536\u6d88\u606f\u65f6\u6709\u6548\uff1b\u53d1\u9001\u6d88\u606f\u65f6\u65e0\u6548\uff0c\u81ea\u52a8\u663e\u793a\u7fa4\u540d\u7247")))),(0,l.kt)("p",null,"\u6784\u9020\u65b9\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"miraicle.At('Hello world!')\n")),(0,l.kt)("h2",{id:"at-\u5168\u4f53\u6210\u5458-atall"},"At \u5168\u4f53\u6210\u5458 (AtAll)"),(0,l.kt)("p",null,"\u6784\u9020\u65b9\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"miraicle.AtAll()\n")),(0,l.kt)("h2",{id:"\u8868\u60c5-face"},"\u8868\u60c5 (Face)"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,l.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"face_id")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"int")),(0,l.kt)("td",{parentName:"tr",align:null},"QQ \u8868\u60c5\u7f16\u53f7\uff0c\u53ef\u9009\uff0c\u4f18\u5148\u9ad8\u4e8e ",(0,l.kt)("inlineCode",{parentName:"td"},"name"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"name")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"str")),(0,l.kt)("td",{parentName:"tr",align:null},"QQ \u8868\u60c5\u540d\u79f0\uff0c\u53ef\u9009")))),(0,l.kt)("p",null,"\u6784\u9020\u65b9\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"miraicle.Face(face_id=74)\nmiraicle.Face(name='\u592a\u9633')\n")),(0,l.kt)("p",null,"\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"Face")," \u7c7b\u63d0\u4f9b\u7684\u9759\u6001\u5de5\u5382\u65b9\u6cd5 ",(0,l.kt)("inlineCode",{parentName:"p"},"from_face_id")," \u6216 ",(0,l.kt)("inlineCode",{parentName:"p"},"from_name")," \u6765\u6784\u9020 ",(0,l.kt)("inlineCode",{parentName:"p"},"Face")," \u5bf9\u8c61\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"miraicle.Face.from_face_id(74)\nmiraicle.Face.from_name('\u592a\u9633')\n")),(0,l.kt)("h2",{id:"\u56fe\u7247-image"},"\u56fe\u7247 (Image)"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"\u53c2\u6570"),(0,l.kt)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),(0,l.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"path")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"str")),(0,l.kt)("td",{parentName:"tr",align:null},"\u56fe\u7247\u7684\u8def\u5f84\uff0c\u53d1\u9001\u672c\u5730\u56fe\u7247\uff0c\u76f8\u5bf9\u8def\u5f84\u4e8e ",(0,l.kt)("inlineCode",{parentName:"td"},"data\\net.mamoe.mirai-api-http\\images"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"url")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"str")),(0,l.kt)("td",{parentName:"tr",align:null},"\u56fe\u7247\u7684 ",(0,l.kt)("inlineCode",{parentName:"td"},"url"),"\uff0c\u53d1\u9001\u65f6\u53ef\u4f5c\u7f51\u7edc\u56fe\u7247\u7684\u94fe\u63a5\uff1b\u63a5\u6536\u65f6\u4e3a\u817e\u8baf\u56fe\u7247\u670d\u52a1\u5668\u7684\u94fe\u63a5\uff0c\u53ef\u7528\u4e8e\u56fe\u7247\u4e0b\u8f7d")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"image_id")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"str")),(0,l.kt)("td",{parentName:"tr",align:null},"\u56fe\u7247\u7684 ",(0,l.kt)("inlineCode",{parentName:"td"},"image_id"),"\uff0c\u7fa4\u56fe\u7247\u4e0e\u597d\u53cb\u56fe\u7247\u683c\u5f0f\u4e0d\u540c")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"base64")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"bytes")," \u6216 ",(0,l.kt)("inlineCode",{parentName:"td"},"str")),(0,l.kt)("td",{parentName:"tr",align:null},"\u5982\u679c\u662f ",(0,l.kt)("inlineCode",{parentName:"td"},"bytes")," \u5219\u4e3a\u56fe\u7247\u7684 ",(0,l.kt)("inlineCode",{parentName:"td"},"base64")," \u7f16\u7801\uff0c\u5982\u679c\u662f ",(0,l.kt)("inlineCode",{parentName:"td"},"str")," \u5219\u4e3a\u56fe\u7247\u8def\u5f84\uff0c",(0,l.kt)("inlineCode",{parentName:"td"},"miraicle")," \u4f1a\u8bfb\u53d6\u56fe\u7247\u5e76\u4ee5 ",(0,l.kt)("inlineCode",{parentName:"td"},"base64")," \u7684\u5f62\u5f0f\u7f16\u7801\uff1b\u63a5\u6536\u65f6\u4e3a\u7a7a")))),(0,l.kt)("p",null,"\u6784\u9020\u65b9\u6cd5\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"miraicle.Image(path='a.png')                # \u8be5\u6587\u4ef6\u5728 `data\\net.mamoe.mirai-api-http\\images` \u76ee\u5f55\u4e0b\nmiraicle.Image(url='https://github.com/mamoe/mirai/blob/dev/docs/mirai.png')    # \u53d1\u9001\u7f51\u7edc\u56fe\u7247\nmiraicle.Image(url=r'file:\\\\\\D:\\b.gif')     # \u53d1\u9001\u672c\u5730\u56fe\u7247\uff0c\u53ea\u80fd\u7528\u7edd\u5bf9\u8def\u5f84\uff0c\u524d\u7f00 `file:\\\\\\` \u4e0d\u53ef\u7701\u7565\nmiraicle.Image(image_id='{B407F708-A2C6-A506-3420-98DF7CAC4A57}.jpg')           # \u4f7f\u7528 image_id \u53d1\u9001\u56fe\u7247\nmiraicle.Image(base64=base64.b64encode(open('c.png', 'rb').read()))             # \u4f7f\u7528 base64 \u53d1\u9001\u56fe\u7247\nmiraicle.Image(base64='c.png')              # miraicle \u8bfb\u53d6\u56fe\u7247\u5e76\u4ee5 base64 \u7684\u5f62\u5f0f\u7f16\u7801\u53d1\u9001\n")),(0,l.kt)("h2",{id:"\u95ea\u7167-flashimage"},"\u95ea\u7167 (FlashImage)"),(0,l.kt)("p",null,"TODO"),(0,l.kt)("h2",{id:"\u8bed\u97f3-voice"},"\u8bed\u97f3 (Voice)"),(0,l.kt)("p",null,"TODO"),(0,l.kt)("h2",{id:"xml"},"Xml"),(0,l.kt)("p",null,"TODO"),(0,l.kt)("h2",{id:"json"},"Json"),(0,l.kt)("p",null,"TODO"),(0,l.kt)("h2",{id:"app"},"App"),(0,l.kt)("p",null,"TODO"),(0,l.kt)("h2",{id:"poke"},"Poke"),(0,l.kt)("p",null,"TODO"),(0,l.kt)("h2",{id:"\u9ab0\u5b50-dice"},"\u9ab0\u5b50 (Dice)"),(0,l.kt)("p",null,"TODO"),(0,l.kt)("h2",{id:"\u6587\u4ef6-file"},"\u6587\u4ef6 (File)"),(0,l.kt)("p",null,"TODO"))}c.isMDXComponent=!0}}]);